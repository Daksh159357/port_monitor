<!DOCTYPE html>
<html>
<head>
    <title>Port Scanner</title>
    <style>
        body { font-family: Arial; }
        .port { display:inline-block; margin:2px; padding:4px; background:lightgreen; }
    </style>
</head>
<body>
<h2>All-Port Scanner (1-65535)</h2>

<input id="target" placeholder="example.com">
<button onclick="start()">Scan</button>

<div id="open"></div>

<script>
let ws;

function start(){
    ws = new WebSocket("ws://" + location.host + "/scan");
    ws.onopen = () => {
        ws.send(JSON.stringify({ target: document.getElementById("target").value }));
    };
    ws.onmessage = (evt) => {
        const data = JSON.parse(evt.data);
        document.getElementById("open").innerHTML = "";
        data.open.forEach(p => {
            const el = document.createElement("span");
            el.className = "port";
            el.innerText = p;
            document.getElementById("open").appendChild(el);
        });
    };
}
</script>
</body>
</html>
