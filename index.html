<!DOCTYPE html>
<html>
<head>
<title>Live Port Monitor</title>
<style>
body{
    background:#0d1117;
    color:#e6edf3;
    font-family:Arial;
    text-align:center;
}
.container{
    width:900px;
    margin:auto;
}
input,button{
    padding:10px;
    margin:5px;
    border:none;
    border-radius:6px;
}
button{
    background:#238636;
    color:white;
    cursor:pointer;
}
.panel{
    background:#161b22;
    padding:20px;
    margin-top:20px;
    border-radius:12px;
}
.port{
    display:inline-block;
    margin:5px;
    padding:8px 12px;
    border-radius:6px;
    background:#1f6feb;
}
.new{ background:#2ea043; }
.closed{ background:#da3633; }
</style>
</head>

<body>
<div class="container">
<h1>Live Port Scanner</h1>

<input id="target" placeholder="IP or domain">
<input id="start" placeholder="Start port" value="1">
<input id="end" placeholder="End port" value="1024">
<input id="speed" placeholder="Threads" value="800">
<input id="delay" placeholder="Delay" value="5">
<br>
<button onclick="startScan()">Start Scan</button>

<div class="panel">
<h2>Open Ports</h2>
<div id="ports"></div>
</div>
</div>

<script>
let ws;

function startScan(){
    ws = new WebSocket("ws://" + location.host + "/scan");

    ws.onopen = () => {
        ws.send(JSON.stringify({
            target:target.value,
            start:start.value,
            end:end.value,
            speed:speed.value,
            delay:delay.value
        }));
    };

    ws.onmessage = (msg)=>{
        let data = JSON.parse(msg.data);
        let div = document.getElementById("ports");
        div.innerHTML="";

        data.open.forEach(p=>{
            let el=document.createElement("span");
            el.className="port";
            el.innerText=p;
            div.appendChild(el);
        });

        data.new.forEach(p=>{
            let el=document.createElement("span");
            el.className="port new";
            el.innerText=p+" NEW";
            div.appendChild(el);
        });

        data.closed.forEach(p=>{
            let el=document.createElement("span");
            el.className="port closed";
            el.innerText=p+" CLOSED";
            div.appendChild(el);
        });
    };
}
</script>
</body>
</html>
